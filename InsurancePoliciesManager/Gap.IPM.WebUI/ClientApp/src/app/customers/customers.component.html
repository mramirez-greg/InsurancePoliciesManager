<h1 id="tableLabel">Gestión de clientes</h1>

<p>Desde este espacio puede gestionar los clientes, agregar, modificar</p>

<p *ngIf="!vm"><em>Cargando, espere por favor...</em></p>

<section *ngIf="vm">
  <section class="row">
    <section class="col-lg">
      <section class="clearfix">
        <h2 class="float-left">Lista de clientes</h2>
        <button class="btn btn-default float-right" title="Crear Cliente..."
                (click)="showNewCustomerModal(newCustomerModalTemplate)">
          <fa-icon [icon]="faPlus"></fa-icon>
        </button>
      </section>
      <section class="table-responsive">
        <table class="table table-striped table-m">
          <thead>
            <tr>
              <th>Nombres</th>
              <th>Direccion</th>
              <th>Telefono</th>
              <th>Ciudad</th>
              <th>Region</th>
              <th>Pais</th>
              <th>Codigo Postal</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let customer of vm.customers; index as i">
              <td>{{customer.firstName}} {{customer.lastName }}</td>
              <td>{{customer.address}}</td>
              <td>{{customer.phone}}</td>
              <td>{{customer.city}}</td>
              <td>{{customer.region}}</td>
              <td>{{customer.country}}</td>
              <td>{{customer.postalCode}}</td>
              <td>
                <button (click)="showCustomerEditModal(editCustomerModalTemplate,customer)"
                        class="btn btn-default btn-xs" role="button">
                  <fa-icon [icon]="faEllipsisH"></fa-icon>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
  </section>
</section>

<ng-template #editCustomerModalTemplate>
  <section class="modal-header clearfix">
    <h4 class="modal-title float-left">Editar Cliente</h4>
    <button type="button" class="close float-right" aria-label="Close" (click)="editCustomerModalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </section>
  <section class="modal-body">
    <section class="form-group">
      <label for="firstName">Primer nombre</label>
      <input type="text" class="form-control" id="firstName" placeholder="ingrese el nombre" [(ngModel)]="editCustomerEditor.firstName"
             [ngClass]="{ 'is-invalid': editCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="lastName">Apellido</label>
      <input type="text" class="form-control" id="lastName" placeholder="ingrese el apellido" [(ngModel)]="editCustomerEditor.lastName"
             [ngClass]="{ 'is-invalid': editCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="address">Direccion</label>
      <input type="text" class="form-control" id="address" placeholder="ingrese la direccion" [(ngModel)]="editCustomerEditor.address"
             [ngClass]="{ 'is-invalid': editCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="phone">Telefono</label>
      <input type="text" class="form-control" id="phone" placeholder="ingrese el telefono" [(ngModel)]="editCustomerEditor.phone"
             [ngClass]="{ 'is-invalid': editCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="city">Ciudad</label>
      <input type="text" class="form-control" id="city" placeholder="ingrese el ciudad" [(ngModel)]="editCustomerEditor.city"
             [ngClass]="{ 'is-invalid': editCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="region">Departamento</label>
      <input type="text" class="form-control" id="region" placeholder="ingrese el departamento" [(ngModel)]="editCustomerEditor.region"
             [ngClass]="{ 'is-invalid': editCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="country">Pais</label>
      <input type="text" class="form-control" id="country" placeholder="ingrese el pais" [(ngModel)]="editCustomerEditor.country"
             [ngClass]="{ 'is-invalid': editCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="postalCode">Codigo postal</label>
      <input type="text" class="form-control" id="postalCode" placeholder="ingrese el codio postal" [(ngModel)]="editCustomerEditor.postalCode"
             [ngClass]="{ 'is-invalid': editCustomerEditor.error }" />
    </section>
  </section>
  <section class="modal-footer">
    <section class="clearfix">
      <section class="float-right">
        <button class="btn btn-default" (click)="editCustomerModalRef.hide()">Cancel</button>
        <button class="btn btn-primary" (click)="updateCustomer()">Actualizar</button>
      </section>
    </section>
  </section>
</ng-template>

<ng-template #newCustomerModalTemplate>
  <section class="modal-header clearfix">
    <h4 class="modal-title float-left">Nuevo Cliente</h4>
    <button type="button" class="close float-right" aria-label="Close" (click)="newCustomerCancelled()">
      <span aria-hidden="true">&times;</span>
    </button>
  </section>
  <section class="modal-body">
    <section class="form-group">
      <label for="customerId">Identificación</label>
      <input type="text" class="form-control" id="customerId" placeholder="ingrese la identificación" [(ngModel)]="newCustomerEditor.customerId"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="firstName">Nombre</label>
      <input type="text" class="form-control" id="firstName" placeholder="ingrese el nombre" [(ngModel)]="newCustomerEditor.firstName"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="lastName">Apellido</label>
      <input type="text" class="form-control" id="lastName" placeholder="ingrese el apellido" [(ngModel)]="newCustomerEditor.lastName"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="address">Direccion</label>
      <input type="text" class="form-control" id="address" placeholder="ingrese la direccion" [(ngModel)]="newCustomerEditor.address"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="phone">Telefono</label>
      <input type="text" class="form-control" id="phone" placeholder="ingrese el telefono" [(ngModel)]="newCustomerEditor.phone"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="city">Ciudad</label>
      <input type="text" class="form-control" id="city" placeholder="ingrese el ciudad" [(ngModel)]="newCustomerEditor.city"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="region">Departamento</label>
      <input type="text" class="form-control" id="region" placeholder="ingrese el departamento" [(ngModel)]="newCustomerEditor.region"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="country">Pais</label>
      <input type="text" class="form-control" id="country" placeholder="ingrese el pais" [(ngModel)]="newCustomerEditor.country"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
    <section class="form-group">
      <label for="postalCode">Codigo postal</label>
      <input type="text" class="form-control" id="postalCode" placeholder="ingrese el codio postal" [(ngModel)]="newCustomerEditor.postalCode"
             [ngClass]="{ 'is-invalid': newCustomerEditor.error }" />
    </section>
  </section>
  <section class="modal-footer">
    <section class="text-right">
      <button class="btn btn-default" (click)="newCustomerCancelled()">Cancelar</button>
      <button class="btn btn-primary" (click)="addCustomer()">Crear</button>
    </section>
  </section>
</ng-template>
